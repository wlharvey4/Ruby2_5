<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 

Copyright (C) 2018 

wlharvey4 

All Rights Reserved.

The Ruby2.5 Information and Documentation program is copyright
(C) 2018 by wlharvey4. It is published under
the conditions of the GNU General Public License, version 3.


This is Edition 0.5a of Ruby 2.5 Information and Documentation. -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Ruby User's Guide On Puzzle Program (Ruby2_5 Information)</title>

<meta name="description" content="Ruby User's Guide On Puzzle Program (Ruby2_5 Information)">
<meta name="keywords" content="Ruby User's Guide On Puzzle Program (Ruby2_5 Information)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Ruby-User_0027s-Guide.html#Ruby-User_0027s-Guide" rel="up" title="Ruby User's Guide">
<link href="Ruby-User_0027s-Guide-on-Regular-Expressions.html#Ruby-User_0027s-Guide-on-Regular-Expressions" rel="next" title="Ruby User's Guide on Regular Expressions">
<link href="Ruby-User_0027s-Guide-on-Strings.html#Ruby-User_0027s-Guide-on-Strings" rel="prev" title="Ruby User's Guide on Strings">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Ruby-User_0027s-Guide-On-Puzzle-Program"></a>
<div class="header">
<p>
Next: <a href="Ruby-User_0027s-Guide-on-Regular-Expressions.html#Ruby-User_0027s-Guide-on-Regular-Expressions" accesskey="n" rel="next">Ruby User's Guide on Regular Expressions</a>, Previous: <a href="Ruby-User_0027s-Guide-on-Strings.html#Ruby-User_0027s-Guide-on-Strings" accesskey="p" rel="prev">Ruby User's Guide on Strings</a>, Up: <a href="Ruby-User_0027s-Guide.html#Ruby-User_0027s-Guide" accesskey="u" rel="up">Ruby User's Guide</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="On-Puzzle-Program"></a>
<h4 class="subsubsection">2.4.1.4 On Puzzle Program</h4>
<a name="index-guess_002erb"></a>

<a name="guess_002drb"></a><a name="index-_007bguess_002erb_007d_002c-definition"></a>
<p><span class="roman">{<samp>guess.rb</samp>}</span> &equiv;
</p><div class="example">
<pre class="example"># save this as guess.rb
words = ['foobar', 'baz', 'quux']
secret = words[rand(3)]

print &quot;guess? &quot;
while guess = STDIN.gets
  guess.chop!
  if guess == secret
    puts &quot;You win!&quot;
    break
  else
    puts &quot;Sorry, you lose.&quot;
  end
  print &quot;guess? &quot;
end
puts &quot;The word was &quot;, secret, &quot;.&quot;
</pre></div>


<a name="New-Control-Structure-while"></a>
<h4 class="subheading">New Control Structure <code>while</code></h4>
<a name="index-while"></a>

<p>In this program, a new control structure, <code>while</code>, is used.  The
code between <code>while</code> and its corresponding <code>end</code> will
execute repeatedly as long as some specified condition remains true.
In this case, &lsquo;<samp>guess=STDIN.gets</samp>&rsquo; is both an active statement
(collecting a line of user input and storing it as guess), and a
condition (if there is no input, guess, which repesents the value of
the whole &lsquo;<samp>guess=STDIN.gets</samp>&rsquo; expression, has a <code>nil</code> value,
causing while to stop looping).
</p>
<a name="Standard-Input-Object-_002d_002d_002d-STDIN"></a>
<h4 class="subheading">Standard Input Object &mdash; <var>STDIN</var></h4>
<a name="index-standard-input-object-stdin"></a>
<a name="index-stdin"></a>
<a name="index-stdin_002egets"></a>
<a name="index-read-one-line-from-standard-input"></a>

<p><var>STDIN</var> is the standard input object.  Usually, &lsquo;<samp>guess=gets</samp>&rsquo;
does the same thing as &lsquo;<samp>guess=STDIN.gets</samp>&rsquo;.  In line 5 we read one
line from standard input by the method <var>STDIN</var>.<code>gets</code>.  If
<var>EOF</var> (end of file) occurs while getting the line, <code>gets</code>
returns <code>nil</code>.  So the code associated with this <code>while</code> will
repeat until it sees <tt class="key">^D</tt> signifying the end of input.
</p>
<a name="guess_002echop_0021"></a>
<h4 class="subheading"><code>guess.chop!</code></h4>
<a name="index-guess_002echop_0021"></a>

<p><code>guess.chop!</code> in line 6 deletes the last character from
<code>guess</code>; in this case it will always be a <code>newline</code>
character, <code>gets</code> includes that character to reflect the user&rsquo;s
<tt class="key">return</tt> keystroke, but we&rsquo;re not interested in it.
</p>
<a name="Printing-Variables"></a>
<h4 class="subheading">Printing Variables</h4>
<a name="index-puts"></a>

<p>In line 15 we print the secret word.  We have written this as a
<code>puts</code> (<code>put s</code>tring) statement with two arguments, which
are printed one after the other; but it would have been equally
effective to do it with a single argument, writing secret as
<code>#{secret}</code> to make it clear that it is a variable to be
evaluated, not a literal word to be printed:
</p>
<div class="example">
<pre class="example">puts &quot;the word is #{secret}.&quot;
</pre></div>

<p>It builds a single string and presents it as a single argument to
<code>puts</code>.
</p>
<a name="print-vs-puts"></a>
<h4 class="subheading"><code>print</code> vs <code>puts</code></h4>

<p>Also, we are by now used to the idea of using <code>puts</code> for standard
script output, but this script uses <code>print</code> instead, in lines 4
and 13.  They are not quite the same thing.  <code>print</code> outputs
exactly what it is given; <code>puts</code> also ensures that the output
line ends.  Using <code>print</code> in lines 4 and 13 leaves the cursor
next to what was just printed, rather than moving it to the beginning
of the next line.  This creates a recognizable prompt for user
input.  In general, the four output calls below are equivalent:
</p>
<a name="Flushing-Standard-Output"></a>
<h4 class="subheading">Flushing Standard Output</h4>
<a name="index-flush-standard-output"></a>
<a name="index-buffering"></a>

<p>Sometimes a text window is programmed to <em>buffer</em> output for the
sake of speed, collecting individual characters and displaying them
only when it is given a <tt class="key">newline</tt> character.  So if the guessing
game script misbehaves by not showing the prompt lines until after the
user supplies a guess, <em>buffering</em> is the likely culprit.  To
make sure this doesn&rsquo;t happen, you can &ldquo;flush&rdquo; the output as soon as
you have printed the prompt.  It tells the standard output device (an
object named <var>STDOUT</var>), &ldquo;don&rsquo;t wait; display what you have in your
buffer right now.&rdquo;  &lsquo;<samp>04 print &quot;guess? &quot;; STDOUT.flush</samp>&rsquo;.  
</p>


<hr>
<div class="header">
<p>
Next: <a href="Ruby-User_0027s-Guide-on-Regular-Expressions.html#Ruby-User_0027s-Guide-on-Regular-Expressions" accesskey="n" rel="next">Ruby User's Guide on Regular Expressions</a>, Previous: <a href="Ruby-User_0027s-Guide-on-Strings.html#Ruby-User_0027s-Guide-on-Strings" accesskey="p" rel="prev">Ruby User's Guide on Strings</a>, Up: <a href="Ruby-User_0027s-Guide.html#Ruby-User_0027s-Guide" accesskey="u" rel="up">Ruby User's Guide</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
